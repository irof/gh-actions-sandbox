name: じっけんじょう

on:
  push:
    branches:
      - master

jobs:
  sample:
    name: さんぷる
    runs-on: ubuntu-latest
    steps:
      - name: コマンド実行
        run: |
          echo hello world.
  jikken:
    name: じっけん
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - run: git fetch --prune --unshallow
      - name: get latest release tagname
        run: |
          latest_tag=$(curl -s https://api.github.com/repos/${GITHUB_REPOSITORY}/releases/latest | jq -r ".tag_name")
          echo ${latest_tag}
          echo "::set-env name=latest_tag::${latest_tag}"
      - name: create release body
        run: |
          echo ${latest_tag}
          subject=$(git log --format="%s" ${latest_tag}..HEAD -- . | awk '{printf $0","}')
          echo "::set-env name=subject::${subject}"
      - name: echo
        run: echo ${subject}

