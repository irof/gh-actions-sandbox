name: じっけんじょう

on:
  push:
    branches:
      - master

jobs:
  sample:
    name: さんぷる
    runs-on: ubuntu-latest
    steps:
      - name: コマンド実行
        run: |
          echo hello world.
  jikken:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: GitHub APIでlatestリリースのtag取得
        run: |
          latest_tag=$(curl -s https://api.github.com/repos/${GITHUB_REPOSITORY}/releases/latest | jq -r ".tag_name")
          echo ${latest_tag}
          echo "::set-env name=latest_tag::${latest_tag}"
      - name: Git履歴取得
        run: git fetch --prune --unshallow
      - name: latestリリース以降のlog表示
        run: |
          echo ${latest_tag}
          git log ${latest_tag}..


